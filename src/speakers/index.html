<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/app-route/app-route.html">
<link rel="import" href="/bower_components/iron-pages/iron-pages.html">

<link rel="import" href="list.html">
<link rel="import" href="speaker.html">

<dom-module id="tardis-speakers">
  <template>
    <app-route
      route="{{route}}"
      pattern="/:id"
      data="{{routeData}}"></app-route>

    <app-route
      route="{{route}}"
      pattern="/"
      data="{{routeData}}"></app-route>

    <iron-pages role="main" attr-for-selected="name" selected="[[page]]">
      <speakers-list name="list"></speakers-list>
      <speaker-page name="speaker" id="[[routeData.id]]"></speaker-page>
    </iron-pages>
  </template>
  <script>
    class TardisSpeakers extends Polymer.Element {
      static get is() {
        return 'tardis-speakers'
      }

      static get properties() {
        return {
          page: {
            type: String
          },
          route: {
            type: Object
          }
        };
      }

      static get observers() {
        return [
          '_routePageChanged(route)'
        ];
      }

      connectedCallback() {
        super.connectedCallback();
      }

      _routePageChanged(route) {
        this.page = this.route.path ? 'speaker' : 'list';
      }
    }

    customElements.define(TardisSpeakers.is, TardisSpeakers);
  </script>
</dom-module>
